# AI 旅遊顧問使用說明

## 功能概述

AI 旅遊顧問是一個智能聊天機器人，可以幫助用戶：
- 🗺️ 規劃旅遊路線
- 💰 提供預算管理建議
- 🏛️ 推薦景點和活動
- 🚗 建議交通方式
- 🏨 推薦住宿選擇
- 🌤️ 提供季節性旅遊建議

## 使用方法

### 1. 開啟 AI 諮詢

在以下頁面中，點擊右上角的 **"AI諮詢"** 按鈕：
- 首頁
- 我的旅行分頁
- 創建旅行分頁

### 2. 與 AI 對話

- 在輸入框中輸入您的旅遊相關問題
- 按 **Enter** 發送訊息
- 按 **Shift + Enter** 換行
- AI 會根據您的問題提供專業建議

### 3. 聊天機器人控制

- **最小化**：點擊最小化按鈕，聊天機器人會縮小為一個圓形按鈕
- **展開**：點擊最小化後的圓形按鈕，聊天機器人會重新展開
- **關閉**：點擊 X 按鈕關閉聊天機器人
- **設置**：點擊齒輪圖標查看和修改 AI 設置

## 配置 Perplexity API

### 1. 獲取 API Key

1. 前往 [Perplexity AI](https://www.perplexity.ai/)
2. 登入您的帳戶
3. 前往 Settings > API
4. 複製您的 API Key

### 2. 設置環境變數

在專案根目錄創建 `.env.local` 文件：

```bash
# Perplexity AI API 配置
VITE_PERPLEXITY_API_KEY=your_actual_api_key_here
```

### 3. 重啟開發伺服器

設置完成後，重新啟動開發伺服器：

```bash
npm run dev
```

## 功能特色

### 🎯 智能回應
- 根據用戶問題提供針對性建議
- 支援上下文對話，記住之前的對話內容
- 提供結構化、易讀的回答

### 🔧 靈活配置
- 可選擇使用 Perplexity API 或模擬回應
- 支援自定義系統提示詞
- 可調整 AI 回應的創意度和長度

### 💬 用戶體驗
- 即時回應，支援載入動畫
- 響應式設計，適配不同螢幕尺寸
- 支援鍵盤快捷鍵操作

## 常見問題

### Q: 為什麼 AI 回應很慢？
A: 如果使用 Perplexity API，回應速度取決於網路狀況和 API 服務器負載。如果使用模擬回應，會有 1-3 秒的延遲來模擬真實體驗。

### Q: 如何讓 AI 提供更準確的建議？
A: 請具體描述您的需求，例如：
- 具體的目的地
- 預算範圍
- 旅遊天數
- 偏好活動類型

### Q: 可以詢問非旅遊相關的問題嗎？
A: AI 旅遊顧問專門設計用於旅遊諮詢。如果詢問其他問題，AI 會禮貌地引導回旅遊相關話題。

### Q: 如何備份聊天記錄？
A: 目前的聊天記錄僅保存在瀏覽器記憶體中，重新整理頁面後會清空。建議將重要建議複製保存。

## 技術架構

### 前端組件
- `AIChatbot.tsx`：主要的聊天機器人組件
- `perplexity.ts`：Perplexity API 配置和整合

### 狀態管理
- 使用 React Hooks 管理聊天狀態
- 支援最小化/展開狀態
- 可配置的 API 使用選項

### API 整合
- 支援 Perplexity AI API
- 模擬回應模式（用於測試和開發）
- 錯誤處理和重試機制

## 開發者說明

### 添加新的回應模式

在 `simulateAIResponse` 函數中添加新的關鍵字匹配：

```typescript
if (lowerInput.includes('新關鍵字')) {
  return '新的回應內容';
}
```

### 自定義系統提示詞

修改 `perplexity.ts` 中的 `TRAVEL_SYSTEM_PROMPT` 來調整 AI 的行為和專業領域。

### 擴展功能

可以考慮添加：
- 語音輸入支援
- 圖片上傳和分析
- 多語言支援
- 聊天記錄匯出
- 用戶偏好設定

## 支援

如果您遇到任何問題或有改進建議，請：
1. 檢查瀏覽器控制台是否有錯誤訊息
2. 確認 API Key 是否正確設置
3. 檢查網路連接狀況
4. 聯繫開發團隊

---

**注意**：使用 Perplexity API 會產生費用，請參考 [Perplexity 定價頁面](https://www.perplexity.ai/pricing) 了解詳細費用。
